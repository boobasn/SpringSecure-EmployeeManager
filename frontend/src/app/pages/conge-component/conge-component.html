<div class="conge-container">

  <h1>Gestion des Congés</h1>

  <!-- FILTRES -->
  <div class="form-card">

    <label>Status :</label>

    <select [(ngModel)]="filterStatus" (change)="applyFilters()">
      <option value="ALL">Tous</option>
      <option value="ATTENTE">En attente</option>
      <option value="APPROUVE">Approuvé</option>
      <option value="REFUSE">Refusé</option>
    </select>

  </div>


  <!-- LISTE -->
  <div class="list-card">

    <table>

      <thead>
        <tr>
          <th>Employées</th>
          <th>Type</th>
          <th>Motif</th>
          <th>Début</th>
          <th>Fin</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>

      <tbody>

        <tr *ngFor="let leave of filtered">

          <td>
            {{ leave.employee?.firstName }} {{ leave.employee?.lastName }}
          </td>

          <td>{{ leave.typeConge }}</td>
          <td class="motif-cell" [title]="leave.motif">
            {{
                leave.motif
                ? (leave.motif.length > 40
                    ? (leave.motif | slice:0:40) + '...'
                    : leave.motif)
                : '—'
            }}

        </td>
          <td>{{ leave.startDate }}</td>
          <td>{{ leave.endDate }}</td>
          <td>{{ leave.status }}</td>

          <td>

            <!-- APPROUVER -->
            <button
                *ngIf="leave.status !== 'APPROUVE'"
                (click)="approve(leave)">
                Approuver
            </button>

            <button
                *ngIf="leave.status !== 'REFUSE'"
                (click)="reject(leave)">
                Refuser
            </button>

          </td>

        </tr>

      </tbody>

    </table>

  </div>

</div>
